{% extends 'base.html' %}

{% block header %}
{% include 'dashboard/_header.html' %}

{% endblock %}

{% block content %}

<div class="row">
    {% include 'dashboard/_carteira.html' %}
    {% include 'dashboard/_alocacao.html' %}
</div>
<div class="row">

    <div class="col-xl-12">
        <div class="card bg-default">
          <div class="card-header bg-transparent">
            <div class="row align-items-center">
              <div class="col">
                <h6 class="text-light text-uppercase ls-1 mb-1">Performance</h6>
                <h5 class="h3 text-white mb-0">Vendas</h5>
              </div>
            </div>
          </div>
          <div class="card-body">
            <!-- Chart -->
            <div class="chart">
                <div class="chartjs-size-monitor">
                    <div class="chartjs-size-monitor-expand">
                        <div class=""></div>
                    </div>
                    <div class="chartjs-size-monitor-shrink">
                        <div class=""></div>
                    </div>
                </div>
                <!-- Chart wrapper -->
                <canvas id="chart-sales-dark" class="chart-canvas chartjs-render-monitor" width="792" height="350"
                    style="display: block; width: 792px; height: 350px;"></canvas>
            </div>
          </div>
        </div>
      </div>

</div>
{% endblock %}

{% block js %}
<script>
    function chamaFormModal() {
        url = "{% url 'cria_movimentacao' %}";
        $.ajax({
            url: url,
            type: 'GET',
            success: function (data) {
                $('#movimentacaoModal .modal-body').html(data);
            },
            error: function (data) {
                alert('Erro ao carregar dados');
            }
        });
    }

    function submitModal() {
        url = "{% url 'cria_movimentacao' %}";
        $.ajax({
            url: url,
            type: 'POST',
            data: $("#id_form_movimentacao").serialize(),
            success: function (data) {
                location.reload();
            },
            error: function (data) {
                if(data.status == 400){
                    $('#movimentacaoModal .modal-body').html(data.responseText);
                }else{
                    alert('Erro no sistema');
                }          
            }
        });
    }

</script>
{% endblock %}